<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Tower of Psych: topsDataFile Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="classes.html"><span>Class&nbsp;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>topsDataFile Class Reference</h1><!-- doxytag: class="topsDataFile" --><hr/><a name="_details"></a><h2>Overview</h2>
<p>Utility to organize incremental reading and writing of data. </p>
<p><a class="el" href="classtops_data_file.html" title="Utility to organize incremental reading and writing of data.">topsDataFile</a> facilitates writing data to a single file, incrementally, over time. It keeps track of data increments themeselves as well as metadata related to which increments have already been written. It also facilitates reading incremental data and keeps track of which increments have already been read out.</p>
<p><a class="el" href="classtops_data_file.html" title="Utility to organize incremental reading and writing of data.">topsDataFile</a> is suitable for sharing data (such as <a class="el" href="classtops_data_log.html" title="One central place to log data on the fly.">topsDataLog</a> data) between separate instance of Matlab running on the same machine. Each Matlab instance should be able to write data increments and read in increments that were written by the other. <a class="el" href="classtops_data_file.html" title="Utility to organize incremental reading and writing of data.">topsDataFile</a> attempts to prevent data corruption due to poorly timed access by saving data and metadata separately, and using metadata to coordinate file access.  Note that <a class="el" href="classtops_data_file.html" title="Utility to organize incremental reading and writing of data.">topsDataFile</a> objects are not handle objects, and <a class="el" href="classtops_data_file.html" title="Utility to organize incremental reading and writing of data.">topsDataFile</a> objects themselves are not returned directly. Instead, the <a class="el" href="classtops_data_file.html#a932f7761ec6c24ffbfa78c05ce94bfba" title="Create a header struct with fields that match the properties of the topsDataFile...">newHeader()</a> methods returns a struct with fields that match the properties of the <a class="el" href="classtops_data_file.html" title="Utility to organize incremental reading and writing of data.">topsDataFile</a> class, and other <a class="el" href="classtops_data_file.html" title="Utility to organize incremental reading and writing of data.">topsDataFile</a> methods expect to work with these "header" structs. This pattern faciliitates writing and reading of header meta data to file. It also makes explicit the idea that <a class="el" href="classtops_data_file.html" title="Utility to organize incremental reading and writing of data.">topsDataFile</a> objects represent data on the hard disk, and should not themselves contain much data or maintain much internal state. </p>

<p><a href="classtops_data_file-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Properties</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a11ae7a55494110f02f037320d01bc800"></a><!-- doxytag: member="topsDataFile::fileWithPath" ref="a11ae7a55494110f02f037320d01bc800" args="" -->
Property&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtops_data_file.html#a11ae7a55494110f02f037320d01bc800">fileWithPath</a> = 'topsDataFileData.mat'</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">string name of the file to read from and write to, which may include the file path <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7fd106e26fd84e47086a33115eaeac4d"></a><!-- doxytag: member="topsDataFile::incrementPrefix" ref="a7fd106e26fd84e47086a33115eaeac4d" args="" -->
Property&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtops_data_file.html#a7fd106e26fd84e47086a33115eaeac4d">incrementPrefix</a> = 'topsDataFileIncrement'</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">string prefix to use for identifying data increments <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae0d4db102f0f75fa28303e4701c493c2"></a><!-- doxytag: member="topsDataFile::dateTimeFunction" ref="ae0d4db102f0f75fa28303e4701c493c2" args="" -->
Property&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtops_data_file.html#ae0d4db102f0f75fa28303e4701c493c2">dateTimeFunction</a> = @now</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">function handle for getting the current date-and-time as a number <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a44482a28f419b3d6aedc0517f5688b3c"></a><!-- doxytag: member="topsDataFile::datestrFormat" ref="a44482a28f419b3d6aedc0517f5688b3c" args="" -->
Property&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtops_data_file.html#a44482a28f419b3d6aedc0517f5688b3c">datestrFormat</a> = 'yyyymmddTHHMMSSPFFF'</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">format string to use with Matlab's builtin datestr() <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a817361dc71b486729abecee9dbebd4db"></a><!-- doxytag: member="topsDataFile::writtenIncrements" ref="a817361dc71b486729abecee9dbebd4db" args="" -->
Property&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtops_data_file.html#a817361dc71b486729abecee9dbebd4db">writtenIncrements</a> = []</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">array of date-and-time numbers for previously written data increments <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a43e8bf0a8dfdc6738833447316254395"></a><!-- doxytag: member="topsDataFile::readIncrements" ref="a43e8bf0a8dfdc6738833447316254395" args="" -->
Property&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtops_data_file.html#a43e8bf0a8dfdc6738833447316254395">readIncrements</a> = []</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">array of date-and-time numbers for previously read data increments <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0cfc5ba75207a41bfd5c8a88ec2ff7cb"></a><!-- doxytag: member="topsDataFile::userData" ref="a0cfc5ba75207a41bfd5c8a88ec2ff7cb" args="" -->
Property&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtops_data_file.html#a0cfc5ba75207a41bfd5c8a88ec2ff7cb">userData</a> = []</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">any external data to be stored with the header metadata <br/></td></tr>
<tr><td colspan="2"><h2>Static Methods</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static fHeader&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtops_data_file.html#a932f7761ec6c24ffbfa78c05ce94bfba">newHeader</a> (varargin)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a header struct with fields that match the properties of the <a class="el" href="classtops_data_file.html" title="Utility to organize incremental reading and writing of data.">topsDataFile</a> class.  <a href="#a932f7761ec6c24ffbfa78c05ce94bfba"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static fHeader incrementCell&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtops_data_file.html#a1e42f6b536f6148fb314ce8787e6710c">read</a> (fHeader, increments)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read any new data increments from a <a class="el" href="classtops_data_file.html" title="Utility to organize incremental reading and writing of data.">topsDataFile</a>.  <a href="#a1e42f6b536f6148fb314ce8787e6710c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static fHeader&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtops_data_file.html#a9c2841b8cc5ac05d5193040fbbe14e8d">write</a> (fHeader, newIncrement)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Write a new data increment to a <a class="el" href="classtops_data_file.html" title="Utility to organize incremental reading and writing of data.">topsDataFile</a>.  <a href="#a9c2841b8cc5ac05d5193040fbbe14e8d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2b0ac9371b6f7954a78cf50cf63f1351"></a><!-- doxytag: member="topsDataFile::incrementNamesFromNumbers" ref="a2b0ac9371b6f7954a78cf50cf63f1351" args="(fHeader, numbers)" -->
static names&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtops_data_file.html#a2b0ac9371b6f7954a78cf50cf63f1351">incrementNamesFromNumbers</a> (fHeader, numbers)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get data increment names from date-and-time numbers. <br/></td></tr>
</table>
<hr/><h2>Methods</h2>
<a class="anchor" id="a932f7761ec6c24ffbfa78c05ce94bfba"></a><!-- doxytag: member="topsDataFile::newHeader" ref="a932f7761ec6c24ffbfa78c05ce94bfba" args="(varargin)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static fHeader newHeader </td>
          <td>(</td>
          <td class="paramtype">varargin&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Create a header struct with fields that match the properties of the <a class="el" href="classtops_data_file.html" title="Utility to organize incremental reading and writing of data.">topsDataFile</a> class. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>varargin</em>&nbsp;</td><td>optional property-value pairs to assign to the new header.</td></tr>
  </table>
  </dd>
</dl>
<p>Use this method instead of the <a class="el" href="classtops_data_file.html" title="Utility to organize incremental reading and writing of data.">topsDataFile</a> constructor.</p>
<p>Returns a header struct with fields and default values that match those of the <a class="el" href="classtops_data_file.html" title="Utility to organize incremental reading and writing of data.">topsDataFile</a> class. <em>varargin</em> may contain pairs of property names and values to be assigned to the new struct. </p>

</div>
</div>
<a class="anchor" id="a1e42f6b536f6148fb314ce8787e6710c"></a><!-- doxytag: member="topsDataFile::read" ref="a1e42f6b536f6148fb314ce8787e6710c" args="(fHeader, increments)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static fHeader incrementCell read </td>
          <td>(</td>
          <td class="paramtype">fHeader&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">increments&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Read any new data increments from a <a class="el" href="classtops_data_file.html" title="Utility to organize incremental reading and writing of data.">topsDataFile</a>. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>fHeader</em>&nbsp;</td><td>a <a class="el" href="classtops_data_file.html" title="Utility to organize incremental reading and writing of data.">topsDataFile</a> header struct as returned from <a class="el" href="classtops_data_file.html#a932f7761ec6c24ffbfa78c05ce94bfba" title="Create a header struct with fields that match the properties of the topsDataFile...">newHeader()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>increments</em>&nbsp;</td><td>optional array of date-and-time numbers identifying data increments to read or re-read from the <a class="el" href="classtops_data_file.html" title="Utility to organize incremental reading and writing of data.">topsDataFile</a></td></tr>
  </table>
  </dd>
</dl>
<p>Uses <em>fHeader</em> to locate a <a class="el" href="classtops_data_file.html" title="Utility to organize incremental reading and writing of data.">topsDataFile</a> on disk. If the file exists and contains <a class="el" href="classtops_data_file.html" title="Utility to organize incremental reading and writing of data.">topsDataFile</a> header metadata, loads the metadata from disk and updates <em>fHeader</em> to match. Returns the updated <em>fHeader</em> </p>
<p>Also returns a cell array containing any data increments that have not yet been read from disk. These increments correspond to values in <em>fHeader.writtenIncrements</em> that are not yet present in <em>fHeader.readIncrements</em>.</p>
<p>If <em>increments</em> is provided, attempts to read or re-read the specified data increments from the <a class="el" href="classtops_data_file.html" title="Utility to organize incremental reading and writing of data.">topsDataFile</a>. Returns a cell array with the same size as <em>increments</em>. Where the specified <em>increments</em> are not present in the <a class="el" href="classtops_data_file.html" title="Utility to organize incremental reading and writing of data.">topsDataFile</a>, the returned cell array will be empty. Using <a class="el" href="classtops_data_file.html#a1e42f6b536f6148fb314ce8787e6710c" title="Read any new data increments from a topsDataFile.">read()</a> in this way will not affect <em>fHeader.readIncrements</em>, or subsequent calls to <a class="el" href="classtops_data_file.html#a1e42f6b536f6148fb314ce8787e6710c" title="Read any new data increments from a topsDataFile.">read()</a>. </p>

</div>
</div>
<a class="anchor" id="a9c2841b8cc5ac05d5193040fbbe14e8d"></a><!-- doxytag: member="topsDataFile::write" ref="a9c2841b8cc5ac05d5193040fbbe14e8d" args="(fHeader, newIncrement)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static fHeader write </td>
          <td>(</td>
          <td class="paramtype">fHeader&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">newIncrement&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Write a new data increment to a <a class="el" href="classtops_data_file.html" title="Utility to organize incremental reading and writing of data.">topsDataFile</a>. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>fHeader</em>&nbsp;</td><td>a <a class="el" href="classtops_data_file.html" title="Utility to organize incremental reading and writing of data.">topsDataFile</a> header struct as returned from <a class="el" href="classtops_data_file.html#a932f7761ec6c24ffbfa78c05ce94bfba" title="Create a header struct with fields that match the properties of the topsDataFile...">newHeader()</a>. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>newIncrement</em>&nbsp;</td><td>any data increment to append to the <a class="el" href="classtops_data_file.html" title="Utility to organize incremental reading and writing of data.">topsDataFile</a></td></tr>
  </table>
  </dd>
</dl>
<p>If <em>newIncrement</em> is provided, appends the <em>newIncrement</em> to the <a class="el" href="classtops_data_file.html" title="Utility to organize incremental reading and writing of data.">topsDataFile</a> on disk, then updates the hjeader metadata on disk. If a@ newIncrement is omitted, only writes header metadata to disk. If the <a class="el" href="classtops_data_file.html" title="Utility to organize incremental reading and writing of data.">topsDataFile</a> doesn't already exist on disk, creates the new file first.</p>
<p>Since <a class="el" href="classtops_data_file.html#a9c2841b8cc5ac05d5193040fbbe14e8d" title="Write a new data increment to a topsDataFile.">write()</a> updates header metadata only after writing the new increment data, concurrent <a class="el" href="classtops_data_file.html#a1e42f6b536f6148fb314ce8787e6710c" title="Read any new data increments from a topsDataFile.">read()</a> calls, such as from a separate Matlab instance, should be able to safely ignore increment data that's in the process of being written.</p>
<p>Returns <em>fHeader</em>, which may have been modified with new metadata. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>topsDataFile.m</li>
</ul>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Variables</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr size="1"/><address style="text-align: right;"><small>Generated on Wed Mar 14 15:27:56 2012 for Tower of Psych by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
