<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Tower of Psych: topsStateMachine Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="pages.html"><span>Other</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>topsStateMachine Class Reference</h1><!-- doxytag: class="topsStateMachine" --><!-- doxytag: inherits="topsConcurrent" --><hr/><a name="_details"></a><h2>Overview</h2>
<p>A state machine for controlling flow through e.g. </p>
<p>trials. </p>
<div class="dynheader">
Inheritance diagram for topsStateMachine:</div>
<div class="dynsection">
<div class="center"><img src="classtops_state_machine__inherit__graph.png" border="0" usemap="#tops_state_machine_inherit__map" alt="Inheritance graph"/></div>
<map name="tops_state_machine_inherit__map" id="tops_state_machine_inherit__map">
<area shape="rect" id="node2" href="classtops_concurrent.html" title="Superclass for flow&#45;control classes that may operate concurrently." alt="" coords="15,237,143,267"/><area shape="rect" id="node4" href="classtops_runnable.html" title="Superclass for flow&#45;control classes." alt="" coords="21,160,136,189"/><area shape="rect" id="node6" href="classtops_foundation.html" title="Superclass for all of the funtamental Tower of Psych classes." alt="" coords="16,83,141,112"/><area shape="rect" id="node8" href="classhandle.html" title="handle" alt="" coords="45,5,112,35"/></map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>

<p><a href="classtops_state_machine-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Properties and Events</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">Property&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtops_state_machine.html#a7861e769bf7518302516cfabc3f611a6">allStates</a> = struct([])</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">struct array of state data.  <a href="#a7861e769bf7518302516cfabc3f611a6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">Property&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtops_state_machine.html#a24701c49c20d912138a10311f57be1e2">transitionFevalable</a> = {}</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">optional fevalable cell array to invoke during state transitions  <a href="#a24701c49c20d912138a10311f57be1e2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a18414c54c7ec4b757437956d8e2bfd3f"></a><!-- doxytag: member="topsStateMachine::clockFunction" ref="a18414c54c7ec4b757437956d8e2bfd3f" args="" -->
Property&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtops_state_machine.html#a18414c54c7ec4b757437956d8e2bfd3f">clockFunction</a> = @topsClock</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">any function that returns the current time as a number <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8d95726cc7fdeaa323f3df752cf1915b"></a><!-- doxytag: member="topsStateMachine::startTime" ref="a8d95726cc7fdeaa323f3df752cf1915b" args="" -->
Property&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtops_state_machine.html#a8d95726cc7fdeaa323f3df752cf1915b">startTime</a> = []</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">the time when state traversal began <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a83b3ea5f06651541289007f105d4dcf8"></a><!-- doxytag: member="topsStateMachine::finishTime" ref="a83b3ea5f06651541289007f105d4dcf8" args="" -->
Property&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtops_state_machine.html#a83b3ea5f06651541289007f105d4dcf8">finishTime</a> = []</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">the time when state traversal ended <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">Property&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtops_state_machine.html#a73e4a77c91b5a68656c28b05d0f94dd2">finishState</a> = struct([])</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">struct of information about the last state encountered during traversal.  <a href="#a73e4a77c91b5a68656c28b05d0f94dd2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa0a693ae8ea4e0f0387c5531da6e8e07"></a><!-- doxytag: member="topsStateMachine::currentEntryTime" ref="aa0a693ae8ea4e0f0387c5531da6e8e07" args="" -->
Property&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtops_state_machine.html#aa0a693ae8ea4e0f0387c5531da6e8e07">currentEntryTime</a> = []</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">time when the current state was entered <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a422459a36cb80809cf74b93de92286d9"></a><!-- doxytag: member="topsStateMachine::currentTimeoutTime" ref="a422459a36cb80809cf74b93de92286d9" args="" -->
Property&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtops_state_machine.html#a422459a36cb80809cf74b93de92286d9">currentTimeoutTime</a> = []</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">time when the current state will reach its timeout <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">Property&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtops_state_machine.html#ac24f5406e696651a4c0fea1357fa5355">sharedEntryFevalableNames</a> = {}</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">cell array of strings, names given to functions which are invoked whenever entering any state.  <a href="#ac24f5406e696651a4c0fea1357fa5355"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">Property&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtops_state_machine.html#ae0c1ac7569f553ac1414601f8daea6d2">sharedEntryFevalables</a> = {}</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">cell array of fevalable cell arrays which are invoked whenever entering any state.  <a href="#ae0c1ac7569f553ac1414601f8daea6d2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">Property&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtops_state_machine.html#ad30ba8cc1458bf31f45a398fb170b4b0">sharedExitFevalableNames</a> = {}</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">cell array of strings, names given to functions which are invoked whenever exiting any state.  <a href="#ad30ba8cc1458bf31f45a398fb170b4b0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">Property&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtops_state_machine.html#a99168e55b5b63371db623ca4a3621004">sharedExitFevalables</a> = {}</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">cell array of fevalable cell arrays which are invoked whenever exiting any state.  <a href="#a99168e55b5b63371db623ca4a3621004"></a><br/></td></tr>
<tr><td colspan="2"><h2>Private Properties</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a091ba6272137818a9f60c86d5deb2ace"></a><!-- doxytag: member="topsStateMachine::currentIndex" ref="a091ba6272137818a9f60c86d5deb2ace" args="" -->
Property&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtops_state_machine.html#a091ba6272137818a9f60c86d5deb2ace">currentIndex</a> = []</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">allStates array index for the current state <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae9d8c5f02a0726dd871bc666ca64299f"></a><!-- doxytag: member="topsStateMachine::currentInputFevalable" ref="ae9d8c5f02a0726dd871bc666ca64299f" args="" -->
Property&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtops_state_machine.html#ae9d8c5f02a0726dd871bc666ca64299f">currentInputFevalable</a> = []</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">copy of the current state's input fevalable <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="adfa93e512ddbfdc83d7080d1c7ce2cfe"></a><!-- doxytag: member="topsStateMachine::stateNameToIndex" ref="adfa93e512ddbfdc83d7080d1c7ce2cfe" args="" -->
Property&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtops_state_machine.html#adfa93e512ddbfdc83d7080d1c7ce2cfe">stateNameToIndex</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">containers.Map of state name -&gt; allStates array index. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ace5b8a77a9bf654f63d5aad91be20572"></a><!-- doxytag: member="topsStateMachine::transitionString" ref="ace5b8a77a9bf654f63d5aad91be20572" args="" -->
Property&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtops_state_machine.html#ace5b8a77a9bf654f63d5aad91be20572">transitionString</a> = 'transition'</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">string used for <a class="el" href="classtops_data_log.html" title="One central place to log data on the fly.">topsDataLog</a> entry for transitionFevalable <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae8355764db0f977f2fccbadb69b268db"></a><!-- doxytag: member="topsStateMachine::entryString" ref="ae8355764db0f977f2fccbadb69b268db" args="" -->
Property&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtops_state_machine.html#ae8355764db0f977f2fccbadb69b268db">entryString</a> = 'enter'</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">string used for <a class="el" href="classtops_data_log.html" title="One central place to log data on the fly.">topsDataLog</a> entry during state entry <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aff6ac6427b9ca1c6a734a2b2bb22003f"></a><!-- doxytag: member="topsStateMachine::exitString" ref="aff6ac6427b9ca1c6a734a2b2bb22003f" args="" -->
Property&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtops_state_machine.html#aff6ac6427b9ca1c6a734a2b2bb22003f">exitString</a> = 'exit'</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">string used for <a class="el" href="classtops_data_log.html" title="One central place to log data on the fly.">topsDataLog</a> entry during state exit <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2182892bae7c65ccf7c215b5b5664c61"></a><!-- doxytag: member="topsStateMachine::stateFields" ref="a2182892bae7c65ccf7c215b5b5664c61" args="" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtops_state_machine.html#a2182892bae7c65ccf7c215b5b5664c61">stateFields</a></td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">field names of allStates struct array, defining state behaviors <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae202b93b5e7da3a76264604ca53637e3"></a><!-- doxytag: member="topsStateMachine::stateDefaults" ref="ae202b93b5e7da3a76264604ca53637e3" args="" -->
Property&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtops_state_machine.html#ae202b93b5e7da3a76264604ca53637e3">stateDefaults</a> = {'', '', 0, {}, {}, {}}</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">default values of allStates struct array fields <br/></td></tr>
<tr><td colspan="2"><h2>Methods</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8f470f200b8561fb4539025562dccaef"></a><!-- doxytag: member="topsStateMachine::topsStateMachine" ref="a8f470f200b8561fb4539025562dccaef" args="()" -->
self&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtops_state_machine.html#a8f470f200b8561fb4539025562dccaef">topsStateMachine</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Constructor takes no arguments. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a72e51a8014869030f089a5fb34fdd24f"></a><!-- doxytag: member="topsStateMachine::gui" ref="a72e51a8014869030f089a5fb34fdd24f" args="(self)" -->
g&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtops_state_machine.html#a72e51a8014869030f089a5fb34fdd24f">gui</a> (self)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Launch a graphical interface showing the states in the machine. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">allStateIndexes&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtops_state_machine.html#a25df58665719e972a92f787ee2edc30c">addMultipleStates</a> (self, statesInfo)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Add multiple states to the state machine.  <a href="#a25df58665719e972a92f787ee2edc30c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">allStateIndex&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtops_state_machine.html#a46f50f3c63578358947721563c35fffe">addState</a> (self, stateInfo)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Add a new state to the state machine.  <a href="#a46f50f3c63578358947721563c35fffe"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">allStateIndex&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtops_state_machine.html#ada01032c6b80b64d85490a6289e523d9">editStateByName</a> (self, stateName, varargin)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Edit fields of an existing state.  <a href="#ada01032c6b80b64d85490a6289e523d9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtops_state_machine.html#a27558177c25a153d2d1c050b612dbbb3">addSharedFevalableWithName</a> (self, fcn, <a class="el" href="classtops_foundation.html#a73d044705182dce0379a1c211dca6ec6">name</a>, when)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Add a function to be invoked during every state.  <a href="#a27558177c25a153d2d1c050b612dbbb3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9708e364f7578ed6e1d86cc7d0a0d418"></a><!-- doxytag: member="topsStateMachine::isStateName" ref="a9708e364f7578ed6e1d86cc7d0a0d418" args="(self, stateName)" -->
isState allStateIndex&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtops_state_machine.html#a9708e364f7578ed6e1d86cc7d0a0d418">isStateName</a> (self, stateName)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Check whether a string is the name of a state. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a71e07ed542789473f6458c2539ce6489"></a><!-- doxytag: member="topsStateMachine::getStateInfoByName" ref="a71e07ed542789473f6458c2539ce6489" args="(self, stateName)" -->
stateInfo allStateIndex&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtops_state_machine.html#a71e07ed542789473f6458c2539ce6489">getStateInfoByName</a> (self, stateName)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get a struct of info about a state with a given name. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtops_state_machine.html#aeb3b30c60946a22761128cbd397add94">start</a> (self)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Prepare for state traversal.  <a href="#aeb3b30c60946a22761128cbd397add94"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtops_state_machine.html#a398a82043f7493f0ec73b0a57fa4c5b7">finish</a> (self)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Finish doing state traversal.  <a href="#a398a82043f7493f0ec73b0a57fa4c5b7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtops_state_machine.html#ad39f1b8814f26d4d247d7da89dcd1173">runBriefly</a> (self)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Do a little flow control within the state list.  <a href="#ad39f1b8814f26d4d247d7da89dcd1173"></a><br/></td></tr>
<tr><td colspan="2"><h2>Protected Methods</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6752dc91c316ccfa81c4422de6e45c06"></a><!-- doxytag: member="topsStateMachine::enterStateAtIndex" ref="a6752dc91c316ccfa81c4422de6e45c06" args="(self, allStateIndex)" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtops_state_machine.html#a6752dc91c316ccfa81c4422de6e45c06">enterStateAtIndex</a> (self, allStateIndex)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">reset all the current* properties for the given state <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a154a25b46798f8342508bf5bd456072b"></a><!-- doxytag: member="topsStateMachine::exitCurrentState" ref="a154a25b46798f8342508bf5bd456072b" args="(self)" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtops_state_machine.html#a154a25b46798f8342508bf5bd456072b">exitCurrentState</a> (self)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">clear current* properties but leave currentIndex so it's checkable <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aec3bd1393887c8291a08feec58b38bdb"></a><!-- doxytag: member="topsStateMachine::transitionToStateWithName" ref="aec3bd1393887c8291a08feec58b38bdb" args="(self, nextName)" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classtops_state_machine.html#aec3bd1393887c8291a08feec58b38bdb">transitionToStateWithName</a> (self, nextName)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">call transitionFevalable before exiting last and entering next state <br/></td></tr>
</table>
<hr/><h2>Methods</h2>
<a class="anchor" id="a25df58665719e972a92f787ee2edc30c"></a><!-- doxytag: member="topsStateMachine::addMultipleStates" ref="a25df58665719e972a92f787ee2edc30c" args="(self, statesInfo)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">allStateIndexes addMultipleStates </td>
          <td>(</td>
          <td class="paramtype">self&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">statesInfo&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Add multiple states to the state machine. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>statesInfo</em>&nbsp;</td><td>a cell array with information defining multiple states.</td></tr>
  </table>
  </dd>
</dl>
<p><em>statesInfo</em> should resemble a table, with a row for each new state a column for each state field.</p>
<p>The first row of <em>statesInfo</em> shoud contain field names that correspond to the fields of allStates. See <a class="el" href="classtops_state_machine.html#a46f50f3c63578358947721563c35fffe" title="Add a new state to the state machine.">addState()</a> for field descriptions. Only the <b>name</b> field is mandatory. Fields may appear in any order.</p>
<p>Each additional row of <em>statesInfo</em> shoud contain values aligned with the field names in the first row. A new state will be added using each row of values. Default values will be used where fields are omitted. The <b>name</b> field is mandatory.</p>
<p>The values in the <b>name</b> column should be unique with respect to each other and any existing states. When names collide, new states will replace existing states.</p>
<p>Returns an array of indexes into allStates where the new states were appended or inserted. </p>

</div>
</div>
<a class="anchor" id="a46f50f3c63578358947721563c35fffe"></a><!-- doxytag: member="topsStateMachine::addState" ref="a46f50f3c63578358947721563c35fffe" args="(self, stateInfo)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">allStateIndex addState </td>
          <td>(</td>
          <td class="paramtype">self&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">stateInfo&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Add a new state to the state machine. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>stateInfo</em>&nbsp;</td><td>a struct with information defining a state.</td></tr>
  </table>
  </dd>
</dl>
<p><em>stateInfo</em> should have the same fields as allStates:</p>
<ul>
<li><b>name</b> a string to identify the state</li>
<li><b>timeout</b> time that may elapse before transitioning to the <b>next</b> state, in units of clockFunction</li>
<li><b>next</b> the <b>name</b> of the state to transition to once <b>timeout</b> has elapsed</li>
<li><b>entry</b> a fevalable cell array to invoke whenever entering the state</li>
<li><b>input:</b> a fevalable cell array to invoke after entering the state, during each call to <a class="el" href="classtops_state_machine.html#ad39f1b8814f26d4d247d7da89dcd1173" title="Do a little flow control within the state list.">runBriefly()</a>. Expected to return a single value, which may be the <b>name</b> of a state, in which case the state machine will transition to that state immediately. <b>timeout</b> must be nonzero for <b>input</b> to be invoked.</li>
<li><b>exit:</b> a fevalable cell array to invoke whenever exiting the state</li>
</ul>
<p>Each state must have a unique <b>name</b>. If <em>stateInfo</em> has the same <b>name</b> as an existing state, <em>stateInfo</em> will replace the existing state.</p>
<p>Other fields of <em>stateInfo</em> may be omitted, in which case default values will be used.</p>
<p>Fields of stateInfo may correspond to one of the names in sharedEntryFevalableNames or sharedExitFevalableNames. Values in these fields will be passed as state-specific arguments to the shared function.</p>
<p>Returns the index into allStates where the new state was appended or inserted. </p>

</div>
</div>
<a class="anchor" id="ada01032c6b80b64d85490a6289e523d9"></a><!-- doxytag: member="topsStateMachine::editStateByName" ref="ada01032c6b80b64d85490a6289e523d9" args="(self, stateName, varargin)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">allStateIndex editStateByName </td>
          <td>(</td>
          <td class="paramtype">self&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">stateName&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">varargin&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Edit fields of an existing state. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>stateName</em>&nbsp;</td><td>string name of an existing state in allStates </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>varargin</em>&nbsp;</td><td>flexible number of field-value paris to edit the fields of the <em>stateName</em> state.</td></tr>
  </table>
  </dd>
</dl>
<p>Assigns the given values to the given fields of the existing state that has the name <em>stateName</em>. <em>varargin</em> represents a flexible number of traling arguments passed to <a class="el" href="classtops_state_machine.html#ada01032c6b80b64d85490a6289e523d9" title="Edit fields of an existing state.">editStateByName()</a>. The first argument in each pair should be one of the field names of the allStates struct, which include the default state fields described for addField() and the names of any shared fevalables as added with <a class="el" href="classtops_state_machine.html#a27558177c25a153d2d1c050b612dbbb3" title="Add a function to be invoked during every state.">addSharedFevalableWithName()</a>. The second argument in each pair should be a value to assign to the named field.</p>
<p>Editing the <b>name</b> field of a state might cause the state machine to misbehave.</p>
<p>Returns the index into allStates of the <em>stateName</em> state. If <em>stateName</em> is not the name of an existing state, returns []. </p>

</div>
</div>
<a class="anchor" id="a27558177c25a153d2d1c050b612dbbb3"></a><!-- doxytag: member="topsStateMachine::addSharedFevalableWithName" ref="a27558177c25a153d2d1c050b612dbbb3" args="(self, fcn, name, when)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">addSharedFevalableWithName </td>
          <td>(</td>
          <td class="paramtype">self&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">fcn&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classtops_foundation.html#a73d044705182dce0379a1c211dca6ec6">name</a>&nbsp;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">when&nbsp;</td>
          <td class="paramname"></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Add a function to be invoked during every state. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>fcn</em>&nbsp;</td><td>a fevalable cell array to invoke during every state </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>name</em>&nbsp;</td><td>string name to give to <em>fcn</em> </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>when</em>&nbsp;</td><td>the string 'entry' or 'exit' specifying when to invoke <em>fcn</em>. For 'entry', <em>fcn</em> will be invoked just after each state's own entry. For 'exit', <em>fcn</em> will be invoked just before each state's own exit. If omitted, defaults to 'entry'.</td></tr>
  </table>
  </dd>
</dl>
<p>Adds <em>fcn</em> to the state machine's sharedEntryFevalables or sharedExitFevalables. These functions are called for every state, in addition to each state's own entry and exit.</p>
<p>Each state may specify additional arguments to pass to <em>fcn</em>. These may be specified like other state data, using <em>name</em> as the state field. See <a class="el" href="classtops_state_machine.html#a46f50f3c63578358947721563c35fffe" title="Add a new state to the state machine.">addState()</a> and <a class="el" href="classtops_state_machine.html#a25df58665719e972a92f787ee2edc30c" title="Add multiple states to the state machine.">addMultipleStates()</a> for details on specifying state data.</p>
<p><em>name</em> must be unique with respect to other shared entry or exit functions. If <em>name</em> matches the name of an existing shared function, <em>fcn</em> will replace the existing function. </p>

</div>
</div>
<a class="anchor" id="aeb3b30c60946a22761128cbd397add94"></a><!-- doxytag: member="topsStateMachine::start" ref="aeb3b30c60946a22761128cbd397add94" args="(self)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">start </td>
          <td>(</td>
          <td class="paramtype">self&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Prepare for state traversal. </p>
<p><a class="el" href="classtops_state_machine.html" title="A state machine for controlling flow through e.g.">topsStateMachine</a> extends the <a class="el" href="classtops_state_machine.html#aeb3b30c60946a22761128cbd397add94" title="Prepare for state traversal.">start()</a> method of <a class="el" href="classtops_concurrent.html" title="Superclass for flow-control classes that may operate concurrently.">topsConcurrent</a> to record the startTime and enter the first state in allStates. </p>

<p>Reimplemented from <a class="el" href="classtops_runnable.html#aeb3b30c60946a22761128cbd397add94">topsRunnable</a>.</p>

</div>
</div>
<a class="anchor" id="a398a82043f7493f0ec73b0a57fa4c5b7"></a><!-- doxytag: member="topsStateMachine::finish" ref="a398a82043f7493f0ec73b0a57fa4c5b7" args="(self)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">finish </td>
          <td>(</td>
          <td class="paramtype">self&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Finish doing state traversal. </p>
<p><a class="el" href="classtops_state_machine.html" title="A state machine for controlling flow through e.g.">topsStateMachine</a> extends the <a class="el" href="classtops_state_machine.html#a398a82043f7493f0ec73b0a57fa4c5b7" title="Finish doing state traversal.">finish()</a> method of <a class="el" href="classtops_concurrent.html" title="Superclass for flow-control classes that may operate concurrently.">topsConcurrent</a> to record the finishState and finishTime. </p>

<p>Reimplemented from <a class="el" href="classtops_runnable.html#a398a82043f7493f0ec73b0a57fa4c5b7">topsRunnable</a>.</p>

</div>
</div>
<a class="anchor" id="ad39f1b8814f26d4d247d7da89dcd1173"></a><!-- doxytag: member="topsStateMachine::runBriefly" ref="ad39f1b8814f26d4d247d7da89dcd1173" args="(self)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">runBriefly </td>
          <td>(</td>
          <td class="paramtype">self&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Do a little flow control within the state list. </p>
<p><a class="el" href="classtops_state_machine.html" title="A state machine for controlling flow through e.g.">topsStateMachine</a> extends the <a class="el" href="classtops_state_machine.html#ad39f1b8814f26d4d247d7da89dcd1173" title="Do a little flow control within the state list.">runBriefly()</a> method of <a class="el" href="classtops_concurrent.html" title="Superclass for flow-control classes that may operate concurrently.">topsConcurrent</a> to do state traversal. It checks the input fevalable for the current state and if the input returns a state name, transitions to that state. If not, it checks whether the current state's timeout has expired. If so it transitions to the next state. If there is no next state, traversal ends. </p>

<p>Reimplemented from <a class="el" href="classtops_concurrent.html#ad39f1b8814f26d4d247d7da89dcd1173">topsConcurrent</a>.</p>

</div>
</div>
<hr/><h2>Properties and Events</h2>
<a class="anchor" id="a7861e769bf7518302516cfabc3f611a6"></a><!-- doxytag: member="topsStateMachine::allStates" ref="a7861e769bf7518302516cfabc3f611a6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Property <a class="el" href="classtops_state_machine.html#a7861e769bf7518302516cfabc3f611a6">allStates</a> = struct([])</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>struct array of state data. </p>
<p>Each element represents a single state. See <a class="el" href="classtops_state_machine.html#a46f50f3c63578358947721563c35fffe" title="Add a new state to the state machine.">addState()</a> for details about the struct fields and state properties. </p>

</div>
</div>
<a class="anchor" id="a24701c49c20d912138a10311f57be1e2"></a><!-- doxytag: member="topsStateMachine::transitionFevalable" ref="a24701c49c20d912138a10311f57be1e2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Property <a class="el" href="classtops_state_machine.html#a24701c49c20d912138a10311f57be1e2">transitionFevalable</a> = {}</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>optional fevalable cell array to invoke during state transitions </p>
<p>The function should expect as the first argument a 1x2 struct array of information about the previous state and the next state, with elements in that order. Any other arguments in the cell array will be passed to the function starting at the second place. See <a class="el" href="classtops_state_machine.html#a46f50f3c63578358947721563c35fffe" title="Add a new state to the state machine.">addState()</a> for details of the struct state information. </p>

</div>
</div>
<a class="anchor" id="a73e4a77c91b5a68656c28b05d0f94dd2"></a><!-- doxytag: member="topsStateMachine::finishState" ref="a73e4a77c91b5a68656c28b05d0f94dd2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Property <a class="el" href="classtops_state_machine.html#a73e4a77c91b5a68656c28b05d0f94dd2">finishState</a> = struct([])</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>struct of information about the last state encountered during traversal. </p>
<p>See <a class="el" href="classtops_state_machine.html#a46f50f3c63578358947721563c35fffe" title="Add a new state to the state machine.">addState()</a> for details of the struct state information. </p>

</div>
</div>
<a class="anchor" id="ac24f5406e696651a4c0fea1357fa5355"></a><!-- doxytag: member="topsStateMachine::sharedEntryFevalableNames" ref="ac24f5406e696651a4c0fea1357fa5355" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Property <a class="el" href="classtops_state_machine.html#ac24f5406e696651a4c0fea1357fa5355">sharedEntryFevalableNames</a> = {}</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>cell array of strings, names given to functions which are invoked whenever entering any state. </p>
<p>sharedEntryFevalableNames are parallel to sharedEntryFevalables. See addSharedFcn() for details about shared entry and exit funcions. </p>

</div>
</div>
<a class="anchor" id="ae0c1ac7569f553ac1414601f8daea6d2"></a><!-- doxytag: member="topsStateMachine::sharedEntryFevalables" ref="ae0c1ac7569f553ac1414601f8daea6d2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Property <a class="el" href="classtops_state_machine.html#ae0c1ac7569f553ac1414601f8daea6d2">sharedEntryFevalables</a> = {}</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>cell array of fevalable cell arrays which are invoked whenever entering any state. </p>
<p>sharedEntryFevalableNames are parallel to sharedEntryFevalables. See addSharedFcn() for details about shared entry and exit funcions. </p>

</div>
</div>
<a class="anchor" id="ad30ba8cc1458bf31f45a398fb170b4b0"></a><!-- doxytag: member="topsStateMachine::sharedExitFevalableNames" ref="ad30ba8cc1458bf31f45a398fb170b4b0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Property <a class="el" href="classtops_state_machine.html#ad30ba8cc1458bf31f45a398fb170b4b0">sharedExitFevalableNames</a> = {}</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>cell array of strings, names given to functions which are invoked whenever exiting any state. </p>
<p>sharedExitFevalableNames are parallel to sharedExitFevalables. See addSharedFcn() for details about shared entry and exit funcions. </p>

</div>
</div>
<a class="anchor" id="a99168e55b5b63371db623ca4a3621004"></a><!-- doxytag: member="topsStateMachine::sharedExitFevalables" ref="a99168e55b5b63371db623ca4a3621004" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Property <a class="el" href="classtops_state_machine.html#a99168e55b5b63371db623ca4a3621004">sharedExitFevalables</a> = {}</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>cell array of fevalable cell arrays which are invoked whenever exiting any state. </p>
<p>sharedExitFevalableNames are parallel to sharedExitFevalables. See addSharedFcn() for details about shared entry and exit funcions. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>topsStateMachine.m</li>
</ul>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Variables</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr size="1"/><address style="text-align: right;"><small>Generated on Thu Oct 14 15:02:01 2010 for Tower of Psych by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
